<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Speckle Interactive Urbanism</title>
    <script src="https://unpkg.com/jsqr"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.1/math.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>

    <script
      src="https://docs.opencv.org/4.5.0/opencv.js"
      type="text/javascript"
    ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>


    <style>
      body {
        display: flex;
        height: 80vh;
        margin: 0;
        overflow-y: hidden; /* Add this line */
        font-size: x-small;
      }
      video {
        width: 100%;
        display: none;
      }
      canvas {
        position: relative;
        top: 0;
        left: 0;
        width: 100%;
        pointer-events: none;
      }
      select,
      button {
        margin-top: 5px;
        display: block;
        width: 100%;
      }
      #qr-status {
        margin-top: 10px;
        font-size: x-small;
      }
      #overlay {
        position: absolute;
        top: 5px;
        left: 5px;
        width: 15%;
        padding: 10px;
        background: rgba(168, 168, 168, 0.7);
        color: white;
        border-radius: 10px;
        z-index: 10;
      }

      #speckle-container {
        position: relative;
        width: 100%;
        height: 80vh;
      }

      #speckle-model {
        width: 100%;
        height: 100%;
      }

      /* Settings panel */
      .settings-panel {
        position: absolute;
        top: 5px;
        left: 20%;
        width: 150px;
        background: rgba(168, 168, 168, 0.7);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        display: none;
        color: white;
        z-index: 10;
      }

      /* Color blocks */
      .color-block {
        display: flex;
        align-items: center;
        justify-content: Fspace-between;
        margin-bottom: 10px;
      }

      .slider {
        width: 100%;
      }
    </style>
    <script type="module" crossorigin src="/assets/index-2KWSQLLP.js"></script>
  </head>
  <body>
    <div id="speckle-container">
      <div id="speckle-model"></div>
      <div id="overlay">
        <video id="webcam" autoplay playsinline></video>
        <canvas id="qrCanvas"></canvas>
        <p>Select a camera if necessary</p>
        <select id="cameraSelect"></select>
        <button id="capture">Capture & Overlay</button>
        <p id="qr-status">Detecting QR codes...</p>
        <button id="settings-btn">âš™ Settings</button>
      </div>
      <div class="settings-panel" id="settingsPanel">
        <h4>Settings</h4>
        <div class="color-block">
          <input type="color" id="colorRed" />
          <label id="labelRed">Height: 150</label>
        </div>
        <input
          type="range"
          id="heightRed"
          class="slider"
          min="3"
          max="60"
          value="15"
        />

        <div class="color-block">
          <input type="color" id="colorBlue" />
          <label id="labelBlue">Height: 150</label>
        </div>
        <input
          type="range"
          id="heightBlue"
          class="slider"
          min="3"
          max="60"
          value="33"
        />

        <div class="color-block">
          <input type="color" id="colorGreen" />
          <label id="labelGreen">Height: 150</label>
        </div>
        <input
          type="range"
          id="heightGreen"
          class="slider"
          min="3"
          max="60"
          value="6"
        />

        <button id="get-camera-btn">Get camera position</button>
      </div>
    </div>
  </body>
</html>
